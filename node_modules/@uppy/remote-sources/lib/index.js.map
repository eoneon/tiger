{"version":3,"names":["BasePlugin","Dashboard","Dropbox","GoogleDrive","Instagram","Facebook","OneDrive","Box","Unsplash","Url","Zoom","packageJson","availablePlugins","__proto__","RemoteSources","constructor","uppy","opts","Set","id","type","defaultOptions","sources","Object","keys","target","companionUrl","Error","setOptions","newOpts","uninstall","install","forEach","pluginId","optsForRemoteSourcePlugin","undefined","plugin","pluginNames","formatter","Intl","ListFormat","style","format","use","add","getPlugin","removePlugin","clear","VERSION","version"],"sources":["index.js"],"sourcesContent":["import { BasePlugin } from '@uppy/core'\nimport Dashboard from '@uppy/dashboard'\nimport Dropbox from '@uppy/dropbox'\nimport GoogleDrive from '@uppy/google-drive'\nimport Instagram from '@uppy/instagram'\nimport Facebook from '@uppy/facebook'\nimport OneDrive from '@uppy/onedrive'\nimport Box from '@uppy/box'\nimport Unsplash from '@uppy/unsplash'\nimport Url from '@uppy/url'\nimport Zoom from '@uppy/zoom'\n\nimport packageJson from '../package.json'\n\nconst availablePlugins = {\n  // Using a null-prototype object to avoid prototype pollution.\n  __proto__: null,\n  Box,\n  Dropbox,\n  Facebook,\n  GoogleDrive,\n  Instagram,\n  OneDrive,\n  Unsplash,\n  Url,\n  Zoom,\n}\n\nexport default class RemoteSources extends BasePlugin {\n  static VERSION = packageJson.version\n\n  #installedPlugins = new Set()\n\n  constructor (uppy, opts) {\n    super(uppy, opts)\n    this.id = this.opts.id || 'RemoteSources'\n    this.type = 'acquirer'\n\n    const defaultOptions = {\n      sources: Object.keys(availablePlugins),\n      target: Dashboard,\n    }\n    this.opts = { ...defaultOptions, ...opts }\n\n    if (this.opts.companionUrl == null) {\n      throw new Error('Please specify companionUrl for RemoteSources to work, see https://uppy.io/docs/remote-sources#companionUrl')\n    }\n  }\n\n  setOptions (newOpts) {\n    this.uninstall()\n    super.setOptions(newOpts)\n    this.install()\n  }\n\n  install () {\n    this.opts.sources.forEach((pluginId) => {\n      const optsForRemoteSourcePlugin = { ...this.opts, sources: undefined }\n      const plugin = availablePlugins[pluginId]\n      if (plugin == null) {\n        const pluginNames = Object.keys(availablePlugins)\n        const formatter = new Intl.ListFormat('en', { style: 'long', type: 'disjunction' })\n        throw new Error(`Invalid plugin: \"${pluginId}\" is not one of: ${formatter.format(pluginNames)}.`)\n      }\n      this.uppy.use(plugin, optsForRemoteSourcePlugin)\n      // `plugin` is a class, but we want to track the instance object\n      // so we have to do `getPlugin` here.\n      this.#installedPlugins.add(this.uppy.getPlugin(pluginId))\n    })\n  }\n\n  uninstall () {\n    for (const plugin of this.#installedPlugins) {\n      this.uppy.removePlugin(plugin)\n    }\n    this.#installedPlugins.clear()\n  }\n}\n"],"mappings":";;;;;;AAAA,SAASA,UAAT,QAA2B,YAA3B;AACA,OAAOC,SAAP,MAAsB,iBAAtB;AACA,OAAOC,OAAP,MAAoB,eAApB;AACA,OAAOC,WAAP,MAAwB,oBAAxB;AACA,OAAOC,SAAP,MAAsB,iBAAtB;AACA,OAAOC,QAAP,MAAqB,gBAArB;AACA,OAAOC,QAAP,MAAqB,gBAArB;AACA,OAAOC,GAAP,MAAgB,WAAhB;AACA,OAAOC,QAAP,MAAqB,gBAArB;AACA,OAAOC,GAAP,MAAgB,WAAhB;AACA,OAAOC,IAAP,MAAiB,YAAjB;MAEOC,W;;;AAEP,MAAMC,gBAAgB,GAAG;EACvB;EACAC,SAAS,EAAE,IAFY;EAGvBN,GAHuB;EAIvBL,OAJuB;EAKvBG,QALuB;EAMvBF,WANuB;EAOvBC,SAPuB;EAQvBE,QARuB;EASvBE,QATuB;EAUvBC,GAVuB;EAWvBC;AAXuB,CAAzB;;;;AAcA,eAAe,MAAMI,aAAN,SAA4Bd,UAA5B,CAAuC;EAKpDe,WAAW,CAAEC,IAAF,EAAQC,IAAR,EAAc;IACvB,MAAMD,IAAN,EAAYC,IAAZ;IADuB;MAAA;MAAA,OAFL,IAAIC,GAAJ;IAEK;IAEvB,KAAKC,EAAL,GAAU,KAAKF,IAAL,CAAUE,EAAV,IAAgB,eAA1B;IACA,KAAKC,IAAL,GAAY,UAAZ;IAEA,MAAMC,cAAc,GAAG;MACrBC,OAAO,EAAEC,MAAM,CAACC,IAAP,CAAYZ,gBAAZ,CADY;MAErBa,MAAM,EAAExB;IAFa,CAAvB;IAIA,KAAKgB,IAAL,GAAY,EAAE,GAAGI,cAAL;MAAqB,GAAGJ;IAAxB,CAAZ;;IAEA,IAAI,KAAKA,IAAL,CAAUS,YAAV,IAA0B,IAA9B,EAAoC;MAClC,MAAM,IAAIC,KAAJ,CAAU,6GAAV,CAAN;IACD;EACF;;EAEDC,UAAU,CAAEC,OAAF,EAAW;IACnB,KAAKC,SAAL;IACA,MAAMF,UAAN,CAAiBC,OAAjB;IACA,KAAKE,OAAL;EACD;;EAEDA,OAAO,GAAI;IACT,KAAKd,IAAL,CAAUK,OAAV,CAAkBU,OAAlB,CAA2BC,QAAD,IAAc;MACtC,MAAMC,yBAAyB,GAAG,EAAE,GAAG,KAAKjB,IAAV;QAAgBK,OAAO,EAAEa;MAAzB,CAAlC;MACA,MAAMC,MAAM,GAAGxB,gBAAgB,CAACqB,QAAD,CAA/B;;MACA,IAAIG,MAAM,IAAI,IAAd,EAAoB;QAClB,MAAMC,WAAW,GAAGd,MAAM,CAACC,IAAP,CAAYZ,gBAAZ,CAApB;QACA,MAAM0B,SAAS,GAAG,IAAIC,IAAI,CAACC,UAAT,CAAoB,IAApB,EAA0B;UAAEC,KAAK,EAAE,MAAT;UAAiBrB,IAAI,EAAE;QAAvB,CAA1B,CAAlB;QACA,MAAM,IAAIO,KAAJ,CAAW,oBAAmBM,QAAS,oBAAmBK,SAAS,CAACI,MAAV,CAAiBL,WAAjB,CAA8B,GAAxF,CAAN;MACD;;MACD,KAAKrB,IAAL,CAAU2B,GAAV,CAAcP,MAAd,EAAsBF,yBAAtB,EARsC,CAStC;MACA;;MACA,wEAAuBU,GAAvB,CAA2B,KAAK5B,IAAL,CAAU6B,SAAV,CAAoBZ,QAApB,CAA3B;IACD,CAZD;EAaD;;EAEDH,SAAS,GAAI;IACX,KAAK,MAAMM,MAAX,gCAAqB,IAArB,yCAA6C;MAC3C,KAAKpB,IAAL,CAAU8B,YAAV,CAAuBV,MAAvB;IACD;;IACD,wEAAuBW,KAAvB;EACD;;AAhDmD;AAAjCjC,a,CACZkC,O,GAAUrC,WAAW,CAACsC,O"}